{"version":3,"file":"static/js/437.0568806c.chunk.js","mappings":"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","sources":["lib/api.js","components/TokenRefreshTest.js"],"sourcesContent":["/**\n * FlowMind API Client with Robust Token Refresh\n * Implements queue-based refresh to prevent refresh storms\n * Auto-retries failed requests after token refresh\n */\nimport axios from \"axios\";\n\n// Base API configuration\nconst api = axios.create({ \n  baseURL: \"/api\", \n  timeout: 8000 \n});\n\n// Token refresh state management\nlet isRefreshing = false;\nlet refreshQueue = [];\n\n// Queue management functions\nfunction enqueueRequest(resolver) { \n  refreshQueue.push(resolver); \n}\n\nfunction flushQueue(token) {\n  const currentQueue = [...refreshQueue];\n  refreshQueue = [];\n  \n  currentQueue.forEach(resolver => {\n    try {\n      resolver(token);\n    } catch (error) {\n      console.error('Queue resolver error:', error);\n    }\n  });\n}\n\n// Request interceptor - add token to all requests\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"ts_access_token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // Add user identification for testing\n    const userId = localStorage.getItem(\"ts_user_id\") || \"demo-user\";\n    config.headers[\"X-User-ID\"] = userId;\n    \n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor - handle 401 with smart refresh\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const { config, response } = error;\n    \n    // Only handle 401 errors that haven't been retried yet\n    if (!response || response.status !== 401 || config.__retry) {\n      return Promise.reject(error);\n    }\n    \n    console.log('ğŸ”„ 401 detected, handling token refresh...');\n    \n    // If not already refreshing, start the refresh process\n    if (!isRefreshing) {\n      isRefreshing = true;\n      console.log('ğŸ”„ Starting token refresh process...');\n      \n      try {\n        // Call refresh endpoint\n        const refreshResponse = await axios.post('/api/auth/tradestation/refresh');\n        \n        if (refreshResponse.data?.ok) {\n          console.log('âœ… Token refresh successful');\n          \n          // Get updated token status (in real implementation, token might be returned directly)\n          const statusResponse = await axios.get('/api/auth/tradestation/status');\n          \n          if (statusResponse.data?.authenticated) {\n            // In production, you might get the new token directly from refresh response\n            // For now, we assume the token is managed server-side\n            const newToken = localStorage.getItem(\"ts_access_token\"); // Or from refresh response\n            \n            console.log('âœ… New token available, processing queue...');\n            flushQueue(newToken || 'refreshed');\n          } else {\n            console.warn('âš ï¸  Refresh succeeded but not authenticated');\n            flushQueue('');\n          }\n        } else {\n          console.error('âŒ Token refresh failed:', refreshResponse.data);\n          flushQueue('');\n        }\n        \n      } catch (refreshError) {\n        console.error('âŒ Token refresh error:', refreshError);\n        flushQueue('');\n      } finally {\n        isRefreshing = false;\n        console.log('ğŸ”„ Token refresh process completed');\n      }\n    }\n    \n    // Queue this request for retry after refresh\n    return new Promise((resolve, reject) => {\n      enqueueRequest(async (newToken) => {\n        if (!newToken) {\n          console.log('âŒ No token after refresh, rejecting request');\n          reject(error);\n          return;\n        }\n        \n        // Retry the original request\n        console.log('ğŸ”„ Retrying original request...');\n        config.__retry = true;\n        \n        if (newToken !== 'refreshed') {\n          config.headers.Authorization = `Bearer ${newToken}`;\n        }\n        \n        try {\n          const retryResponse = await api(config);\n          console.log('âœ… Request retry successful');\n          resolve(retryResponse);\n        } catch (retryError) {\n          console.error('âŒ Request retry failed:', retryError);\n          reject(retryError);\n        }\n      });\n    });\n  }\n);\n\n// Helper functions for token management\nexport const tokenManager = {\n  /**\n   * Set access token in localStorage\n   */\n  setToken: (token) => {\n    if (token) {\n      localStorage.setItem(\"ts_access_token\", token);\n      console.log('âœ… Access token stored');\n    }\n  },\n  \n  /**\n   * Get current access token\n   */\n  getToken: () => {\n    return localStorage.getItem(\"ts_access_token\");\n  },\n  \n  /**\n   * Clear stored token\n   */\n  clearToken: () => {\n    localStorage.removeItem(\"ts_access_token\");\n    console.log('ğŸ—‘ï¸  Access token cleared');\n  },\n  \n  /**\n   * Set user ID for multi-user support\n   */\n  setUserId: (userId) => {\n    localStorage.setItem(\"ts_user_id\", userId);\n  },\n  \n  /**\n   * Get current user ID\n   */\n  getUserId: () => {\n    return localStorage.getItem(\"ts_user_id\") || \"demo-user\";\n  },\n  \n  /**\n   * Check if user is authenticated\n   */\n  isAuthenticated: async () => {\n    try {\n      const response = await api.get('/auth/tradestation/status');\n      return response.data?.authenticated || false;\n    } catch (error) {\n      console.error('Authentication check failed:', error);\n      return false;\n    }\n  },\n  \n  /**\n   * Get token expiration info\n   */\n  getTokenInfo: async () => {\n    try {\n      const response = await api.get('/auth/tradestation/status');\n      return response.data;\n    } catch (error) {\n      console.error('Token info check failed:', error);\n      return { authenticated: false, expires_in: 0 };\n    }\n  },\n  \n  /**\n   * Force token refresh\n   */\n  forceRefresh: async () => {\n    try {\n      const response = await api.post('/auth/tradestation/refresh');\n      return response.data?.ok || false;\n    } catch (error) {\n      console.error('Force refresh failed:', error);\n      return false;\n    }\n  }\n};\n\n// Export configured API instance\nexport default api;","/**\n * TradeStation Token Refresh Test Component\n * Tests the robust token refresh system\n */\nimport React, { useState, useEffect } from 'react';\nimport api, { tokenManager } from '../lib/api';\n\nconst TokenRefreshTest = () => {\n  const [status, setStatus] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [logs, setLogs] = useState([]);\n\n  const addLog = (message, type = 'info') => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLogs(prev => [...prev, { timestamp, message, type }]);\n  };\n\n  const clearLogs = () => setLogs([]);\n\n  const initTestToken = async () => {\n    setLoading(true);\n    try {\n      addLog('ğŸ”§ Initializing test token with 10 second expiry...', 'info');\n      \n      // Set a test user ID\n      tokenManager.setUserId('test-user');\n      \n      const response = await api.post('/auth/tradestation/init', {\n        access_token: 'TEST_ACCESS_TOKEN_' + Date.now(),\n        refresh_token: 'TEST_REFRESH_TOKEN_' + Date.now(),\n        expires_in: 10\n      });\n      \n      if (response.data.ok) {\n        addLog('âœ… Test token initialized successfully', 'success');\n        checkStatus();\n      } else {\n        addLog('âŒ Failed to initialize test token', 'error');\n      }\n    } catch (error) {\n      addLog(`âŒ Init error: ${error.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkStatus = async () => {\n    try {\n      const response = await api.get('/auth/tradestation/status');\n      setStatus(response.data);\n      \n      const { authenticated, expires_in, status: tokenStatus } = response.data;\n      addLog(`ğŸ“Š Status: ${authenticated ? 'authenticated' : 'not authenticated'}, expires in ${expires_in}s (${tokenStatus})`, 'info');\n    } catch (error) {\n      addLog(`âŒ Status check error: ${error.message}`, 'error');\n    }\n  };\n\n  const testRefresh = async () => {\n    setLoading(true);\n    try {\n      addLog('ğŸ”„ Testing manual token refresh...', 'info');\n      \n      const response = await api.post('/auth/tradestation/refresh');\n      \n      if (response.data.ok) {\n        addLog('âœ… Token refresh successful', 'success');\n        checkStatus();\n      } else {\n        addLog('âŒ Token refresh failed', 'error');\n      }\n    } catch (error) {\n      addLog(`âŒ Refresh error: ${error.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const testConcurrentRequests = async () => {\n    setLoading(true);\n    try {\n      addLog('ğŸš€ Testing 5 concurrent requests (should trigger single refresh)...', 'info');\n      \n      // Make 5 concurrent requests - should only trigger one refresh\n      const promises = Array(5).fill().map((_, i) => \n        api.get('/auth/tradestation/status').then(() => `Request ${i + 1} success`)\n      );\n      \n      const results = await Promise.allSettled(promises);\n      const successful = results.filter(r => r.status === 'fulfilled').length;\n      \n      addLog(`âœ… Concurrent test: ${successful}/5 requests successful`, 'success');\n    } catch (error) {\n      addLog(`âŒ Concurrent test error: ${error.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const testTokenValidation = async () => {\n    setLoading(true);\n    try {\n      addLog('ğŸ” Testing token validation (auto-refresh if needed)...', 'info');\n      \n      const response = await api.get('/auth/tradestation/validate');\n      \n      if (response.data.valid) {\n        addLog(`âœ… Token validation: ${response.data.message}`, 'success');\n      } else {\n        addLog(`âŒ Token validation failed: ${response.data.error}`, 'error');\n      }\n    } catch (error) {\n      addLog(`âŒ Validation error: ${error.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Auto-refresh status every 2 seconds\n  useEffect(() => {\n    const interval = setInterval(checkStatus, 2000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6 bg-gray-900 text-white rounded-lg\">\n      <h1 className=\"text-2xl font-bold mb-6\">ğŸ”§ TradeStation Token Refresh Test</h1>\n      \n      {/* Status Display */}\n      <div className=\"bg-gray-800 p-4 rounded-lg mb-6\">\n        <h2 className=\"text-lg font-semibold mb-3\">Current Status</h2>\n        {status ? (\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div>\n              <span className=\"text-gray-400\">Authenticated:</span>\n              <span className={`ml-2 ${status.authenticated ? 'text-green-400' : 'text-red-400'}`}>\n                {status.authenticated ? 'âœ… Yes' : 'âŒ No'}\n              </span>\n            </div>\n            <div>\n              <span className=\"text-gray-400\">Expires in:</span>\n              <span className={`ml-2 font-mono ${status.expires_in <= 60 ? 'text-yellow-400' : 'text-green-400'}`}>\n                {status.expires_in}s\n              </span>\n            </div>\n            <div>\n              <span className=\"text-gray-400\">Status:</span>\n              <span className=\"ml-2 text-blue-400\">{status.status}</span>\n            </div>\n            <div>\n              <span className=\"text-gray-400\">Needs refresh:</span>\n              <span className={`ml-2 ${status.needs_refresh ? 'text-yellow-400' : 'text-green-400'}`}>\n                {status.needs_refresh ? 'âš ï¸ Yes' : 'âœ… No'}\n              </span>\n            </div>\n          </div>\n        ) : (\n          <p className=\"text-gray-400\">No status available</p>\n        )}\n      </div>\n      \n      {/* Test Buttons */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n        <button\n          onClick={initTestToken}\n          disabled={loading}\n          className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded-lg transition-colors\"\n        >\n          ğŸ”§ Init Token\n        </button>\n        \n        <button\n          onClick={checkStatus}\n          disabled={loading}\n          className=\"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg transition-colors\"\n        >\n          ğŸ“Š Check Status\n        </button>\n        \n        <button\n          onClick={testRefresh}\n          disabled={loading}\n          className=\"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 rounded-lg transition-colors\"\n        >\n          ğŸ”„ Force Refresh\n        </button>\n        \n        <button\n          onClick={testConcurrentRequests}\n          disabled={loading}\n          className=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 rounded-lg transition-colors\"\n        >\n          ğŸš€ Concurrent Test\n        </button>\n      </div>\n      \n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\n        <button\n          onClick={testTokenValidation}\n          disabled={loading}\n          className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 rounded-lg transition-colors\"\n        >\n          ğŸ” Test Validation\n        </button>\n        \n        <button\n          onClick={clearLogs}\n          className=\"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors\"\n        >\n          ğŸ—‘ï¸ Clear Logs\n        </button>\n      </div>\n      \n      {loading && (\n        <div className=\"text-center mb-4\">\n          <div className=\"inline-flex items-center\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n            Processing...\n          </div>\n        </div>\n      )}\n      \n      {/* Logs */}\n      <div className=\"bg-black rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm\">\n        <div className=\"flex justify-between items-center mb-2\">\n          <h3 className=\"text-green-400\">Console Logs</h3>\n          <span className=\"text-gray-500\">{logs.length} entries</span>\n        </div>\n        <div className=\"space-y-1\">\n          {logs.map((log, index) => (\n            <div key={index} className={`\n              ${log.type === 'error' ? 'text-red-400' : \n                log.type === 'success' ? 'text-green-400' : \n                'text-gray-300'}\n            `}>\n              <span className=\"text-gray-500\">[{log.timestamp}]</span> {log.message}\n            </div>\n          ))}\n          {logs.length === 0 && (\n            <p className=\"text-gray-500\">No logs yet. Start a test to see activity.</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TokenRefreshTest;"],"names":["api","axios","create","baseURL","timeout","isRefreshing","refreshQueue","flushQueue","token","currentQueue","forEach","resolver","error","console","interceptors","request","use","config","localStorage","getItem","headers","Authorization","concat","userId","Promise","reject","response","async","status","__retry","log","_refreshResponse$data","refreshResponse","post","data","ok","_statusResponse$data","get","authenticated","newToken","warn","refreshError","resolve","retryResponse","retryError","push","tokenManager","setItem","TokenRefreshTest","setStatus","useState","loading","setLoading","logs","setLogs","addLog","message","type","arguments","length","undefined","timestamp","Date","toLocaleTimeString","prev","checkStatus","expires_in","tokenStatus","useEffect","interval","setInterval","clearInterval","_jsxs","className","children","_jsx","needs_refresh","onClick","access_token","now","refresh_token","disabled","promises","Array","fill","map","_","i","then","successful","allSettled","filter","r","valid","clearLogs","index"],"sourceRoot":""}